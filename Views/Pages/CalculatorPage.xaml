<Page x:Class="Calculator.Views.Pages.CalculatorPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      mc:Ignorable="d"
      Title="Calculator">

    <Page.InputBindings>
        <KeyBinding Key="D0" Command="{Binding InputCommand}" CommandParameter="0"/>
        <KeyBinding Key="D1" Command="{Binding InputCommand}" CommandParameter="1"/>
        <KeyBinding Key="D2" Command="{Binding InputCommand}" CommandParameter="2"/>
        <KeyBinding Key="D3" Command="{Binding InputCommand}" CommandParameter="3"/>
        <KeyBinding Key="D4" Command="{Binding InputCommand}" CommandParameter="4"/>
        <KeyBinding Key="D5" Command="{Binding InputCommand}" CommandParameter="5"/>
        <KeyBinding Key="D6" Command="{Binding InputCommand}" CommandParameter="6"/>
        <KeyBinding Key="D7" Command="{Binding InputCommand}" CommandParameter="7"/>
        <KeyBinding Key="D8" Command="{Binding InputCommand}" CommandParameter="8"/>
        <KeyBinding Key="D9" Command="{Binding InputCommand}" CommandParameter="9"/>

        <KeyBinding Key="NumPad0" Command="{Binding InputCommand}" CommandParameter="0"/>
        <KeyBinding Key="NumPad1" Command="{Binding InputCommand}" CommandParameter="1"/>
        <KeyBinding Key="NumPad2" Command="{Binding InputCommand}" CommandParameter="2"/>
        <KeyBinding Key="NumPad3" Command="{Binding InputCommand}" CommandParameter="3"/>
        <KeyBinding Key="NumPad4" Command="{Binding InputCommand}" CommandParameter="4"/>
        <KeyBinding Key="NumPad5" Command="{Binding InputCommand}" CommandParameter="5"/>
        <KeyBinding Key="NumPad6" Command="{Binding InputCommand}" CommandParameter="6"/>
        <KeyBinding Key="NumPad7" Command="{Binding InputCommand}" CommandParameter="7"/>
        <KeyBinding Key="NumPad8" Command="{Binding InputCommand}" CommandParameter="8"/>
        <KeyBinding Key="NumPad9" Command="{Binding InputCommand}" CommandParameter="9"/>

        <KeyBinding Key="OemPeriod" Command="{Binding InputCommand}" CommandParameter="."/>
        <KeyBinding Key="Decimal"   Command="{Binding InputCommand}" CommandParameter="."/>
        <KeyBinding Key="Add"      Command="{Binding OperateCommand}" CommandParameter="+"/>
        <KeyBinding Key="Subtract" Command="{Binding OperateCommand}" CommandParameter="-"/>
        <KeyBinding Key="Multiply" Command="{Binding OperateCommand}" CommandParameter="*"/>
        <KeyBinding Key="Divide"   Command="{Binding OperateCommand}" CommandParameter="/"/>

        <KeyBinding Key="F9" Command="{Binding InputCommand}" CommandParameter="±"/>

        <KeyBinding Key="Enter"  Command="{Binding EqualsCommand}"/>
        <KeyBinding Key="Return" Command="{Binding EqualsCommand}"/>
        <KeyBinding Key="Back"   Command="{Binding InputCommand}"  CommandParameter="⌫"/>
        <KeyBinding Key="Escape" Command="{Binding ClearCommand}"/>
    </Page.InputBindings>

    <Grid x:Name="Root"
          Margin="24"
          Focusable="True"
          Loaded="Root_Loaded"
          PreviewTextInput="Root_PreviewTextInput"
          PreviewKeyDown="Root_PreviewKeyDown">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="16"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="20"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <TextBlock Grid.Row="0"
                   Text="{Binding ExpressionText}"
                   Opacity="0.75"
                   FontSize="15"
                   Margin="0,0,0,6"
                   HorizontalAlignment="Right"
                   TextAlignment="Right"/>

        <Border Grid.Row="2"
                Padding="16"
                CornerRadius="12"
                BorderThickness="1"
                MinHeight="90">
            <TextBlock Text="{Binding DisplayText}"
                       FontSize="48"
                       FontWeight="SemiBold"
                       HorizontalAlignment="Right"
                       TextAlignment="Right"
                       TextTrimming="CharacterEllipsis"/>
        </Border>

        <Grid Grid.Row="4">
            <Grid.Resources>
                <Style TargetType="Button">
                    <Setter Property="FontSize" Value="26"/>
                    <Setter Property="FontWeight" Value="SemiBold"/>
                    <Setter Property="Padding" Value="10"/>
                    <Setter Property="Margin" Value="6"/>
                    <Setter Property="MinHeight" Value="68"/>
                    <Setter Property="MinWidth" Value="68"/>
                    <Setter Property="HorizontalContentAlignment" Value="Center"/>
                    <Setter Property="VerticalContentAlignment" Value="Center"/>
                </Style>
            </Grid.Resources>

            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Button Grid.Row="0" Grid.Column="0" Content="C"
                    Command="{Binding ClearCommand}"/>
            <Button Grid.Row="0" Grid.Column="1" Content="⌫"
                    Command="{Binding InputCommand}" CommandParameter="⌫"/>
            <Button Grid.Row="0" Grid.Column="2" Content="±"
                    Command="{Binding InputCommand}" CommandParameter="±"/>
            <Button Grid.Row="0" Grid.Column="3" Content="÷"
                    Command="{Binding OperateCommand}" CommandParameter="/"/>

            <Button Grid.Row="1" Grid.Column="0" Content="7"
                    Command="{Binding InputCommand}" CommandParameter="7"/>
            <Button Grid.Row="1" Grid.Column="1" Content="8"
                    Command="{Binding InputCommand}" CommandParameter="8"/>
            <Button Grid.Row="1" Grid.Column="2" Content="9"
                    Command="{Binding InputCommand}" CommandParameter="9"/>
            <Button Grid.Row="1" Grid.Column="3" Content="×"
                    Command="{Binding OperateCommand}" CommandParameter="*"/>

            <Button Grid.Row="2" Grid.Column="0" Content="4"
                    Command="{Binding InputCommand}" CommandParameter="4"/>
            <Button Grid.Row="2" Grid.Column="1" Content="5"
                    Command="{Binding InputCommand}" CommandParameter="5"/>
            <Button Grid.Row="2" Grid.Column="2" Content="6"
                    Command="{Binding InputCommand}" CommandParameter="6"/>
            <Button Grid.Row="2" Grid.Column="3" Content="-"
                    Command="{Binding OperateCommand}" CommandParameter="-"/>

            <Button Grid.Row="3" Grid.Column="0" Content="1"
                    Command="{Binding InputCommand}" CommandParameter="1"/>
            <Button Grid.Row="3" Grid.Column="1" Content="2"
                    Command="{Binding InputCommand}" CommandParameter="2"/>
            <Button Grid.Row="3" Grid.Column="2" Content="3"
                    Command="{Binding InputCommand}" CommandParameter="3"/>
            <Button Grid.Row="3" Grid.Column="3" Content="+"
                    Command="{Binding OperateCommand}" CommandParameter="+"/>

            <Button Grid.Row="4" Grid.Column="0" Content="00"
                    Command="{Binding InputCommand}" CommandParameter="00"/>
            <Button Grid.Row="4" Grid.Column="1" Content="0"
                    Command="{Binding InputCommand}" CommandParameter="0"/>
            <Button Grid.Row="4" Grid.Column="2" Content="."
                    Command="{Binding InputCommand}" CommandParameter="."/>
            <Button Grid.Row="4" Grid.Column="3" Content="="
                    FontSize="30"
                    Command="{Binding EqualsCommand}"/>
        </Grid>
    </Grid>
</Page>
